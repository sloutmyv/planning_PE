{% extends 'core/base.html' %}

{% block title %}Manuel Utilisateur - Planning PE{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="bg-white rounded-lg shadow-md">
        <!-- Header -->
        <div class="bg-gray-800 text-white px-6 py-4 rounded-t-lg">
            <h1 class="text-2xl font-bold">
                Manuel Utilisateur ‚Äì Administration M√©tier
                <span class="ml-3 text-sm font-normal bg-gray-700 px-2 py-1 rounded">Planning PE</span>
            </h1>
            <p class="text-gray-300 mt-1">Guide pour les administrateurs m√©tier - Configuration et maintien des donn√©es</p>
        </div>

        <!-- Content -->
        <div class="p-6 space-y-8">
            <!-- Sommaire -->
            <section>
                <h2 class="text-xl font-semibold text-gray-800 border-b border-gray-300 pb-2 mb-4">
                    Sommaire
                </h2>
                <div class="bg-gray-100 rounded-lg p-4 border">
                    <nav class="space-y-3 text-sm">
                        <ol class="list-decimal list-inside space-y-1">
                            <li><a href="#introduction" class="text-gray-700 hover:text-gray-900 hover:underline font-medium">Introduction et objectifs</a></li>
                            <li><a href="#architecture-systeme" class="text-gray-700 hover:text-gray-900 hover:underline font-medium">Architecture du syst√®me</a>
                                <ol class="list-decimal list-inside ml-6 mt-1 space-y-1">
                                    <li><a href="#fonctions-principales" class="text-gray-600 hover:text-gray-800 hover:underline">Fonctions principales</a></li>
                                    <li><a href="#architecture-donnees" class="text-gray-600 hover:text-gray-800 hover:underline">Architecture des donn√©es</a></li>
                                    <li><a href="#permissions-acces" class="text-gray-600 hover:text-gray-800 hover:underline">Syst√®me de permissions</a></li>
                                </ol>
                            </li>
                            <li><a href="#guide-utilisation" class="text-gray-700 hover:text-gray-900 hover:underline font-medium">Guide d'utilisation</a>
                                <ol class="list-decimal list-inside ml-6 mt-1 space-y-1">
                                    <li><a href="#ordre-creation" class="text-gray-600 hover:text-gray-800 hover:underline">Ordre de cr√©ation des donn√©es</a></li>
                                    <li><a href="#gestion-modules" class="text-gray-600 hover:text-gray-800 hover:underline">Gestion des modules</a></li>
                                    <li><a href="#cas-particuliers" class="text-gray-600 hover:text-gray-800 hover:underline">Comportements automatiques</a></li>
                                </ol>
                            </li>
                            <li><a href="#administration-avancee" class="text-gray-700 hover:text-gray-900 hover:underline font-medium">Administration avanc√©e</a>
                                <ol class="list-decimal list-inside ml-6 mt-1 space-y-1">
                                    <li><a href="#import-export" class="text-gray-600 hover:text-gray-800 hover:underline">Import/Export des donn√©es</a></li>
                                    <li><a href="#interface-django" class="text-gray-600 hover:text-gray-800 hover:underline">Interface Django Admin</a></li>
                                </ol>
                            </li>
                        </ol>
                    </nav>
                </div>
            </section>

            <!-- I) Introduction -->
            <section id="introduction">
                <h2 class="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4">
                    I) Introduction et objectifs
                </h2>
                
                <div class="space-y-6">
                    <!-- Pr√©sentation -->
                    <div class="bg-gray-50 border-l-4 border-gray-500 p-4">
                        <h3 class="font-semibold text-gray-800 mb-2">I.1) Pr√©sentation de l'application</h3>
                        <p class="text-gray-700">
                            Planning PE est une application web d√©di√©e √† la gestion et g√©n√©ration automatique des plannings d'√©quipes. 
                            Elle offre une interface utilisateur moderne pour l'administration des donn√©es de planification.
                        </p>
                    </div>
                    
                    <!-- Public cible -->
                    <div class="bg-gray-50 border-l-4 border-gray-500 p-4">
                        <h3 class="font-semibold text-gray-800 mb-2">I.2) Public cible du manuel</h3>
                        <p class="text-gray-700">
                            Ce manuel s'adresse exclusivement aux <strong>administrateurs m√©tier</strong> charg√©s de la configuration initiale 
                            et du maintien des donn√©es de l'application. Il se concentre sur l'utilisation op√©rationnelle.
                        </p>
                    </div>
                    
                    <!-- Objectifs -->
                    <div class="bg-gray-50 border-l-4 border-gray-500 p-4">
                        <h3 class="font-semibold text-gray-800 mb-2">I.3) Objectifs du manuel</h3>
                        <div class="text-gray-700 space-y-1">
                            <p>‚Ä¢ D√©crire l'ordre logique de cr√©ation des √©l√©ments pour garantir la coh√©rence des donn√©es</p>
                            <p>‚Ä¢ Expliquer les fonctionnalit√©s d'administration et leurs interactions</p>
                            <p>‚Ä¢ Documenter les proc√©dures d'import/export et de sauvegarde</p>
                            <p>‚Ä¢ Pr√©senter les comportements automatiques du syst√®me</p>
                        </div>
                    </div>

                    <!-- Navigation -->
                    <div class="bg-gray-50 border-l-4 border-gray-500 p-4">
                        <h3 class="font-semibold text-gray-800 mb-2">I.4) Navigation dans l'application</h3>
                        <div class="text-gray-700 space-y-1 text-sm">
                            <p><strong>Acc√®s principal :</strong> http://127.0.0.1:8000/</p>
                            <p><strong>Menu Administration :</strong> Interface adaptative selon les permissions utilisateur</p>
                            <p><strong>Interface Django Admin :</strong> http://127.0.0.1:8000/admin/ (superutilisateurs uniquement)</p>
                            <p><strong>Ordre des menus :</strong> Organis√© selon la s√©quence logique de cr√©ation</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- II) Architecture du syst√®me -->
            <section id="architecture-systeme">
                <h2 class="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4">
                    II) Architecture du syst√®me
                </h2>

            <!-- II.1) Fonctions principales -->
            <section id="fonctions-principales">
                <h3 class="text-lg font-semibold text-gray-700 border-b border-gray-200 pb-2 mb-4">
                    II.1) Fonctions principales du syst√®me
                </h3>

                <div class="space-y-4">
                    <!-- Fonction 1 -->
                    <div class="bg-gray-50 border border-gray-300 rounded-lg p-4">
                        <h4 class="font-semibold text-gray-800 mb-2">II.1.1) Gestion des √©quipes et affectations</h4>
                        <div class="text-gray-700 text-sm space-y-1">
                            <p>Cette fonction permet de structurer l'organisation en cr√©ant :</p>
                            <p>‚Ä¢ Des √©quipes rattach√©es √† des d√©partements</p>
                            <p>‚Ä¢ Des postes au sein de chaque √©quipe</p>
                            <p>‚Ä¢ L'affectation d'agents, plans de roulement et r√®gles de jours f√©ri√©s aux postes</p>
                        </div>
                    </div>

                    <!-- Fonction 2 -->
                    <div class="bg-gray-50 border border-gray-300 rounded-lg p-4">
                        <h4 class="font-semibold text-gray-800 mb-2">II.1.2) Cr√©ation de plans de roulement</h4>
                        <div class="text-gray-700 text-sm">
                            <p>Permet de pr√©configurer des rythmes de travail hebdomadaires r√©utilisables, 
                            simplifiant la g√©n√©ration automatique des plannings sur des p√©riodes d√©finies.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- II.2) Architecture des donn√©es -->
            <section id="architecture-donnees">
                <h3 class="text-lg font-semibold text-gray-700 border-b border-gray-200 pb-2 mb-4">
                    II.2) Architecture des donn√©es et interconnexions
                </h3>
                
                <div class="bg-gray-50 border-l-4 border-gray-400 p-4 mb-6">
                    <p class="text-gray-800">
                        Voici un sch√©ma illustrant les relations entre les principales entit√©s de l'application. 
                        Les fl√®ches indiquent les d√©pendances : une entit√© doit exister avant celles qui en d√©pendent.
                    </p>
                </div>

                <!-- Database Schema Diagram -->
                <div class="bg-white border-2 border-gray-300 rounded-lg p-6 mb-6 overflow-x-auto">
                    <div class="min-w-max">
                        <svg viewBox="0 0 1200 850" class="w-full h-auto" style="max-height: 600px;">
                            <!-- Background -->
                            <rect width="1200" height="850" fill="#f8fafc"/>
                            
                            <!-- Legend -->
                            <g transform="translate(20, 20)">
                                <text x="0" y="0" class="text-sm font-bold" fill="#374151">L√©gende :</text>
                                <line x1="0" y1="15" x2="30" y2="15" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrowhead)"/>
                                <text x="35" y="19" class="text-xs" fill="#374151">Cl√© √©trang√®re (A ‚Üí B : B.field_id ‚Üí A.id)</text>
                                <rect x="0" y="30" width="15" height="15" fill="#dbeafe" stroke="#3b82f6" stroke-width="1"/>
                                <text x="20" y="42" class="text-xs" fill="#374151">Table de donn√©es</text>
                                <text x="0" y="58" class="text-xs font-bold" fill="#dc2626">PK</text>
                                <text x="20" y="58" class="text-xs" fill="#374151">= Cl√© primaire</text>
                                <text x="80" y="58" class="text-xs font-bold" fill="#059669">FK</text>
                                <text x="100" y="58" class="text-xs" fill="#374151">= Cl√© √©trang√®re</text>
                            </g>
                            
                            <!-- Arrow marker definition -->
                            <defs>
                                <marker id="arrowhead" markerWidth="10" markerHeight="7" 
                                        refX="10" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#3b82f6"/>
                                </marker>
                            </defs>
                            
                            <!-- Departments (Top level) -->
                            <g transform="translate(450, 100)">
                                <rect width="160" height="85" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" rx="8"/>
                                <text x="80" y="18" text-anchor="middle" class="text-sm font-bold" fill="#1e40af">Department</text>
                                <line x1="10" y1="23" x2="150" y2="23" stroke="#1e40af" stroke-width="1"/>
                                <text x="12" y="36" class="text-xs font-bold" fill="#dc2626">PK</text>
                                <text x="30" y="36" class="text-xs" fill="#1e40af">id</text>
                                <text x="12" y="49" class="text-xs" fill="#1e40af">name</text>
                                <text x="12" y="62" class="text-xs" fill="#1e40af">order</text>
                                <text x="80" y="79" text-anchor="middle" class="text-xs font-bold" fill="#dc2626">√âTAPE 1</text>
                            </g>
                            
                            <!-- Schedule Types -->
                            <g transform="translate(120, 220)">
                                <rect width="160" height="85" fill="#dcfce7" stroke="#16a34a" stroke-width="2" rx="8"/>
                                <text x="80" y="18" text-anchor="middle" class="text-sm font-bold" fill="#15803d">ScheduleType</text>
                                <line x1="10" y1="23" x2="150" y2="23" stroke="#15803d" stroke-width="1"/>
                                <text x="12" y="36" class="text-xs font-bold" fill="#dc2626">PK</text>
                                <text x="30" y="36" class="text-xs" fill="#15803d">id</text>
                                <text x="12" y="49" class="text-xs" fill="#15803d">designation</text>
                                <text x="12" y="62" class="text-xs" fill="#15803d">color</text>
                                <text x="80" y="79" text-anchor="middle" class="text-xs font-bold" fill="#dc2626">√âTAPE 4</text>
                            </g>
                            
                            <!-- Public Holidays -->
                            <g transform="translate(800, 220)">
                                <rect width="160" height="85" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="8"/>
                                <text x="80" y="18" text-anchor="middle" class="text-sm font-bold" fill="#d97706">PublicHoliday</text>
                                <line x1="10" y1="23" x2="150" y2="23" stroke="#d97706" stroke-width="1"/>
                                <text x="12" y="36" class="text-xs font-bold" fill="#dc2626">PK</text>
                                <text x="30" y="36" class="text-xs" fill="#d97706">id</text>
                                <text x="12" y="49" class="text-xs" fill="#d97706">designation</text>
                                <text x="12" y="62" class="text-xs" fill="#d97706">date</text>
                                <text x="80" y="79" text-anchor="middle" class="text-xs font-bold" fill="#dc2626">OPTIONNEL</text>
                            </g>
                            
                            <!-- Functions/Postes -->
                            <g transform="translate(40, 360)">
                                <rect width="160" height="85" fill="#e0e7ff" stroke="#6366f1" stroke-width="2" rx="8"/>
                                <text x="80" y="18" text-anchor="middle" class="text-sm font-bold" fill="#4338ca">Function</text>
                                <line x1="10" y1="23" x2="150" y2="23" stroke="#4338ca" stroke-width="1"/>
                                <text x="12" y="36" class="text-xs font-bold" fill="#dc2626">PK</text>
                                <text x="30" y="36" class="text-xs" fill="#4338ca">id</text>
                                <text x="12" y="49" class="text-xs" fill="#4338ca">designation</text>
                                <text x="12" y="62" class="text-xs" fill="#4338ca">status</text>
                                <text x="80" y="79" text-anchor="middle" class="text-xs font-bold" fill="#dc2626">√âTAPE 3</text>
                            </g>
                            
                            <!-- Agents -->
                            <g transform="translate(240, 360)">
                                <rect width="160" height="85" fill="#fce7f3" stroke="#ec4899" stroke-width="2" rx="8"/>
                                <text x="80" y="18" text-anchor="middle" class="text-sm font-bold" fill="#be185d">Agent</text>
                                <line x1="10" y1="23" x2="150" y2="23" stroke="#be185d" stroke-width="1"/>
                                <text x="12" y="36" class="text-xs font-bold" fill="#dc2626">PK</text>
                                <text x="30" y="36" class="text-xs" fill="#be185d">id</text>
                                <text x="12" y="49" class="text-xs" fill="#be185d">first_name, last_name</text>
                                <text x="12" y="62" class="text-xs" fill="#be185d">matricule</text>
                                <text x="80" y="79" text-anchor="middle" class="text-xs font-bold" fill="#dc2626">√âTAPE 3</text>
                            </g>
                            
                            <!-- Daily Rotation Plans -->
                            <g transform="translate(440, 360)">
                                <rect width="160" height="100" fill="#dcfce7" stroke="#16a34a" stroke-width="2" rx="8"/>
                                <text x="80" y="18" text-anchor="middle" class="text-sm font-bold" fill="#15803d">DailyRotationPlan</text>
                                <line x1="10" y1="23" x2="150" y2="23" stroke="#15803d" stroke-width="1"/>
                                <text x="12" y="36" class="text-xs font-bold" fill="#dc2626">PK</text>
                                <text x="30" y="36" class="text-xs" fill="#15803d">id</text>
                                <text x="12" y="49" class="text-xs" fill="#15803d">designation</text>
                                <text x="12" y="62" class="text-xs font-bold" fill="#059669">FK</text>
                                <text x="30" y="62" class="text-xs" fill="#15803d">schedule_type_id</text>
                                <text x="80" y="95" text-anchor="middle" class="text-xs font-bold" fill="#dc2626">√âTAPE 5</text>
                            </g>
                            
                            <!-- Rotation Periods -->
                            <g transform="translate(640, 360)">
                                <rect width="160" height="115" fill="#dcfce7" stroke="#16a34a" stroke-width="2" rx="8"/>
                                <text x="80" y="18" text-anchor="middle" class="text-sm font-bold" fill="#15803d">RotationPeriod</text>
                                <line x1="10" y1="23" x2="150" y2="23" stroke="#15803d" stroke-width="1"/>
                                <text x="12" y="36" class="text-xs font-bold" fill="#dc2626">PK</text>
                                <text x="30" y="36" class="text-xs" fill="#15803d">id</text>
                                <text x="12" y="49" class="text-xs font-bold" fill="#059669">FK</text>
                                <text x="30" y="49" class="text-xs" fill="#15803d">daily_rotation_plan_id</text>
                                <text x="12" y="62" class="text-xs" fill="#15803d">start_date, end_date</text>
                                <text x="12" y="75" class="text-xs" fill="#15803d">start_time, end_time</text>
                            </g>
                            
                            <!-- Shift Schedules -->
                            <g transform="translate(300, 540)">
                                <rect width="160" height="85" fill="#f3e8ff" stroke="#8b5cf6" stroke-width="2" rx="8"/>
                                <text x="80" y="18" text-anchor="middle" class="text-sm font-bold" fill="#7c3aed">ShiftSchedule</text>
                                <line x1="10" y1="23" x2="150" y2="23" stroke="#7c3aed" stroke-width="1"/>
                                <text x="12" y="36" class="text-xs font-bold" fill="#dc2626">PK</text>
                                <text x="30" y="36" class="text-xs" fill="#7c3aed">id</text>
                                <text x="12" y="49" class="text-xs" fill="#7c3aed">name</text>
                                <text x="12" y="62" class="text-xs" fill="#7c3aed">type</text>
                                <text x="80" y="79" text-anchor="middle" class="text-xs font-bold" fill="#dc2626">√âTAPE 6</text>
                            </g>
                            
                            <!-- Shift Schedule Periods -->
                            <g transform="translate(520, 540)">
                                <rect width="160" height="100" fill="#f3e8ff" stroke="#8b5cf6" stroke-width="2" rx="8"/>
                                <text x="80" y="18" text-anchor="middle" class="text-sm font-bold" fill="#7c3aed">ShiftSchedulePeriod</text>
                                <line x1="10" y1="23" x2="150" y2="23" stroke="#7c3aed" stroke-width="1"/>
                                <text x="12" y="36" class="text-xs font-bold" fill="#dc2626">PK</text>
                                <text x="30" y="36" class="text-xs" fill="#7c3aed">id</text>
                                <text x="12" y="49" class="text-xs font-bold" fill="#059669">FK</text>
                                <text x="30" y="49" class="text-xs" fill="#7c3aed">shift_schedule_id</text>
                                <text x="12" y="62" class="text-xs" fill="#7c3aed">start_date, end_date</text>
                            </g>
                            
                            <!-- Shift Schedule Weeks -->
                            <g transform="translate(300, 690)">
                                <rect width="160" height="100" fill="#f3e8ff" stroke="#8b5cf6" stroke-width="2" rx="8"/>
                                <text x="80" y="18" text-anchor="middle" class="text-sm font-bold" fill="#7c3aed">ShiftScheduleWeek</text>
                                <line x1="10" y1="23" x2="150" y2="23" stroke="#7c3aed" stroke-width="1"/>
                                <text x="12" y="36" class="text-xs font-bold" fill="#dc2626">PK</text>
                                <text x="30" y="36" class="text-xs" fill="#7c3aed">id</text>
                                <text x="12" y="49" class="text-xs font-bold" fill="#059669">FK</text>
                                <text x="30" y="49" class="text-xs" fill="#7c3aed">period_id</text>
                                <text x="12" y="62" class="text-xs" fill="#7c3aed">week_number</text>
                            </g>
                            
                            <!-- Shift Schedule Daily Plans -->
                            <g transform="translate(520, 690)">
                                <rect width="160" height="115" fill="#f3e8ff" stroke="#8b5cf6" stroke-width="2" rx="8"/>
                                <text x="80" y="18" text-anchor="middle" class="text-sm font-bold" fill="#7c3aed">ShiftScheduleDailyPlan</text>
                                <line x1="10" y1="23" x2="150" y2="23" stroke="#7c3aed" stroke-width="1"/>
                                <text x="12" y="36" class="text-xs font-bold" fill="#dc2626">PK</text>
                                <text x="30" y="36" class="text-xs" fill="#7c3aed">id</text>
                                <text x="12" y="49" class="text-xs font-bold" fill="#059669">FK</text>
                                <text x="30" y="49" class="text-xs" fill="#7c3aed">week_id</text>
                                <text x="12" y="62" class="text-xs font-bold" fill="#059669">FK</text>
                                <text x="30" y="62" class="text-xs" fill="#7c3aed">daily_rotation_plan_id</text>
                                <text x="12" y="75" class="text-xs" fill="#7c3aed">weekday</text>
                            </g>
                            
                            <!-- Foreign Key Relationships with field labels -->
                            
                            <!-- ScheduleType ‚Üí DailyRotationPlan -->
                            <line x1="280" y1="262" x2="440" y2="390" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrowhead)"/>
                            <text x="340" y="320" class="text-xs font-semibold" fill="#3b82f6" transform="rotate(-25 340 320)">schedule_type_id</text>
                            
                            <!-- DailyRotationPlan ‚Üí RotationPeriod -->
                            <line x1="600" y1="410" x2="640" y2="410" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrowhead)"/>
                            <text x="605" y="403" class="text-xs font-semibold" fill="#3b82f6">daily_rotation_plan_id</text>
                            
                            <!-- ShiftSchedule ‚Üí ShiftSchedulePeriod -->
                            <line x1="460" y1="582" x2="520" y2="582" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrowhead)"/>
                            <text x="475" y="575" class="text-xs font-semibold" fill="#3b82f6">shift_schedule_id</text>
                            
                            <!-- ShiftSchedulePeriod ‚Üí ShiftScheduleWeek -->
                            <line x1="560" y1="640" x2="420" y2="690" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrowhead)"/>
                            <text x="470" y="660" class="text-xs font-semibold" fill="#3b82f6" transform="rotate(-15 470 660)">period_id</text>
                            
                            <!-- ShiftScheduleWeek ‚Üí ShiftScheduleDailyPlan -->
                            <line x1="460" y1="740" x2="520" y2="740" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrowhead)"/>
                            <text x="475" y="733" class="text-xs font-semibold" fill="#3b82f6">week_id</text>
                            
                            <!-- DailyRotationPlan ‚Üí ShiftScheduleDailyPlan -->
                            <path d="M 520 460 Q 750 550 600 690" stroke="#3b82f6" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
                            <text x="670" y="580" class="text-xs font-semibold" fill="#3b82f6" transform="rotate(45 670 580)">daily_rotation_plan_id</text>
                        </svg>
                    </div>
                </div>

                <!-- Explanation -->
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <h3 class="font-semibold text-blue-800 mb-3">üîó Relations entre tables (cl√©s √©trang√®res)</h3>
                        <div class="space-y-2 text-sm text-blue-700">
                            <div class="flex items-start space-x-2">
                                <span class="w-2 h-2 bg-blue-500 rounded-full mt-1.5"></span>
                                <p><strong>DailyRotationPlan.schedule_type_id</strong> ‚Üí ScheduleType.id</p>
                            </div>
                            <div class="flex items-start space-x-2">
                                <span class="w-2 h-2 bg-blue-500 rounded-full mt-1.5"></span>
                                <p><strong>RotationPeriod.daily_rotation_plan_id</strong> ‚Üí DailyRotationPlan.id</p>
                            </div>
                            <div class="flex items-start space-x-2">
                                <span class="w-2 h-2 bg-blue-500 rounded-full mt-1.5"></span>
                                <p><strong>ShiftSchedulePeriod.shift_schedule_id</strong> ‚Üí ShiftSchedule.id</p>
                            </div>
                            <div class="flex items-start space-x-2">
                                <span class="w-2 h-2 bg-blue-500 rounded-full mt-1.5"></span>
                                <p><strong>ShiftScheduleWeek.period_id</strong> ‚Üí ShiftSchedulePeriod.id</p>
                            </div>
                            <div class="flex items-start space-x-2">
                                <span class="w-2 h-2 bg-blue-500 rounded-full mt-1.5"></span>
                                <p><strong>ShiftScheduleDailyPlan.week_id</strong> ‚Üí ShiftScheduleWeek.id</p>
                            </div>
                            <div class="flex items-start space-x-2">
                                <span class="w-2 h-2 bg-blue-500 rounded-full mt-1.5"></span>
                                <p><strong>ShiftScheduleDailyPlan.daily_rotation_plan_id</strong> ‚Üí DailyRotationPlan.id</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-orange-50 border border-orange-200 rounded-lg p-4">
                        <h3 class="font-semibold text-orange-800 mb-3">‚ö° Points cl√©s de structure</h3>
                        <div class="space-y-2 text-sm text-orange-700">
                            <div class="flex items-start space-x-2">
                                <span class="w-2 h-2 bg-orange-500 rounded-full mt-1.5"></span>
                                <p><strong>PK</strong> = Cl√© primaire (identifiant unique)</p>
                            </div>
                            <div class="flex items-start space-x-2">
                                <span class="w-2 h-2 bg-orange-500 rounded-full mt-1.5"></span>
                                <p><strong>FK</strong> = Cl√© √©trang√®re (r√©f√©rence vers autre table)</p>
                            </div>
                            <div class="flex items-start space-x-2">
                                <span class="w-2 h-2 bg-orange-500 rounded-full mt-1.5"></span>
                                <p>Les fl√®ches montrent le sens des d√©pendances</p>
                            </div>
                            <div class="flex items-start space-x-2">
                                <span class="w-2 h-2 bg-orange-500 rounded-full mt-1.5"></span>
                                <p>Une table "enfant" ne peut exister sans sa table "parent"</p>
                            </div>
                            <div class="flex items-start space-x-2">
                                <span class="w-2 h-2 bg-orange-500 rounded-full mt-1.5"></span>
                                <p>Respecter l'ordre √©vite les erreurs de contraintes</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Additional Field Reference Table -->
                <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 mt-6">
                    <h3 class="font-semibold text-gray-800 mb-3">üìã R√©f√©rence des champs principaux</h3>
                    <div class="grid md:grid-cols-3 gap-4 text-xs">
                        <div>
                            <h4 class="font-semibold text-blue-700 mb-2">üóÑÔ∏è Tables de base</h4>
                            <ul class="space-y-1 text-gray-600">
                                <li><strong>Department:</strong> name, order</li>
                                <li><strong>Function:</strong> designation, status</li>
                                <li><strong>Agent:</strong> first_name, last_name, matricule</li>
                                <li><strong>PublicHoliday:</strong> designation, date</li>
                                <li><strong>ScheduleType:</strong> designation, color</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-green-700 mb-2">‚è∞ Rythmes et p√©riodes</h4>
                            <ul class="space-y-1 text-gray-600">
                                <li><strong>DailyRotationPlan:</strong> id (PK), designation, schedule_type_id (FK)</li>
                                <li><strong>RotationPeriod:</strong> id (PK), daily_rotation_plan_id (FK), start_date, end_date, start_time, end_time</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-purple-700 mb-2">üìÖ Roulements hebdomadaires</h4>
                            <ul class="space-y-1 text-gray-600">
                                <li><strong>ShiftSchedule:</strong> id (PK), name, type</li>
                                <li><strong>ShiftSchedulePeriod:</strong> id (PK), shift_schedule_id (FK), start_date, end_date</li>
                                <li><strong>ShiftScheduleWeek:</strong> id (PK), period_id (FK), week_number</li>
                                <li><strong>ShiftScheduleDailyPlan:</strong> id (PK), week_id (FK), daily_rotation_plan_id (FK), weekday</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>


            <!-- II.3) Syst√®me de permissions -->
            <section id="permissions-acces">
                <h3 class="text-lg font-semibold text-gray-700 border-b border-gray-200 pb-2 mb-4">
                    II.3) Syst√®me de permissions et acc√®s
                </h3>
                
                <div class="space-y-4">
                    <!-- Niveaux de permissions -->
                    <div class="bg-gray-50 border border-gray-300 rounded-lg p-4">
                        <h4 class="font-semibold text-gray-800 mb-3">II.3.1) Niveaux de permissions</h4>
                        <div class="space-y-3 text-sm">
                            <div class="grid grid-cols-4 gap-3">
                                <div class="bg-white p-3 rounded border border-gray-300">
                                    <p class="font-bold text-gray-700">SA</p>
                                    <p class="text-xs text-gray-600">Super Administrateur</p>
                                    <p class="text-xs text-gray-600">Acc√®s complet Django Admin + application + export/import</p>
                                </div>
                                <div class="bg-white p-3 rounded border border-gray-300">
                                    <p class="font-bold text-gray-700">A</p>
                                    <p class="text-xs text-gray-600">Administrateur</p>
                                    <p class="text-xs text-gray-600">Gestion agents/postes + modification permissions</p>
                                </div>
                                <div class="bg-white p-3 rounded border border-gray-300">
                                    <p class="font-bold text-gray-700">E</p>
                                    <p class="text-xs text-gray-600">√âditeur</p>
                                    <p class="text-xs text-gray-600">√âdition du planning (√† impl√©menter)</p>
                                </div>
                                <div class="bg-white p-3 rounded border border-gray-300">
                                    <p class="font-bold text-gray-700">R</p>
                                    <p class="text-xs text-gray-600">Lecteur</p>
                                    <p class="text-xs text-gray-600">Visualisation seulement</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Navigation adaptative -->
                    <div class="bg-gray-50 border border-gray-300 rounded-lg p-4">
                        <h4 class="font-semibold text-gray-800 mb-2">II.3.2) Navigation adaptative</h4>
                        <div class="text-gray-700 text-sm space-y-1">
                            <p>‚Ä¢ Menu Administration adaptatif selon le niveau de permission utilisateur</p>
                            <p>‚Ä¢ Acc√®s superutilisateur via dropdown pour l'interface Django Admin</p>
                            <p>‚Ä¢ Ordre des menus logique selon la s√©quence de cr√©ation recommand√©e</p>
                        </div>
                    </div>

                    <!-- S√©curit√© -->
                    <div class="bg-gray-50 border border-gray-300 rounded-lg p-4">
                        <h4 class="font-semibold text-gray-800 mb-2">II.3.3) S√©curit√©</h4>
                        <div class="text-gray-700 text-sm space-y-1">
                            <p>‚Ä¢ Cr√©ation automatique de comptes Django pour chaque agent</p>
                            <p>‚Ä¢ Changement de mot de passe obligatoire lors du premier login</p>
                            <p>‚Ä¢ Validation des permissions c√¥t√© serveur pour toutes les op√©rations</p>
                            <p>‚Ä¢ Transactions atomiques pour les op√©rations critiques</p>
                        </div>
                    </div>
                </div>
            </section>
            </section>

            <!-- III) Guide d'utilisation -->
            <section id="guide-utilisation">
                <h2 class="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4">
                    III) Guide d'utilisation
                </h2>

            <!-- III.1) Ordre recommand√© de cr√©ation -->
            <section id="ordre-creation">
                <h3 class="text-lg font-semibold text-gray-700 border-b border-gray-200 pb-2 mb-4">
                    III.1) Ordre de cr√©ation des donn√©es
                </h3>
                <div class="bg-gray-100 border-l-4 border-gray-500 p-4 mb-6">
                    <p class="text-gray-800 font-medium">
                        IMPORTANT : L'ordre de cr√©ation est fondamental pour garantir la coh√©rence des donn√©es et √©viter les erreurs lors de la g√©n√©ration du planning.
                    </p>
                </div>

                <div class="space-y-4">
                    <!-- √âtape 1 -->
                    <div class="bg-gray-50 border border-gray-300 rounded p-4">
                        <h4 class="font-semibold text-gray-800 mb-2">III.1.1) D√©partements</h4>
                        <p class="text-gray-700 mb-2">Les d√©partements doivent √™tre cr√©√©s en premier, car une √©quipe doit obligatoirement √™tre rattach√©e √† un d√©partement.</p>
                        <div class="bg-white p-3 rounded border text-sm">
                            <strong>Navigation :</strong> Administration ‚Üí D√©partements<br>
                            <strong>Priorit√© :</strong> Cr√©ation obligatoire avant les √©quipes
                        </div>
                    </div>

                    <!-- √âtape 2 -->
                    <div class="bg-gray-50 border border-gray-300 rounded p-4">
                        <h4 class="font-semibold text-gray-800 mb-2">III.1.2) √âquipes</h4>
                        <p class="text-gray-700 mb-2">Une fois les d√©partements cr√©√©s, vous pouvez cr√©er une ou plusieurs √©quipes, en les rattachant √† un d√©partement existant.</p>
                        <div class="bg-white p-3 rounded border text-sm">
                            <strong>D√©pendance :</strong> N√©cessite les d√©partements (√©tape 1)<br>
                            <strong>Principe :</strong> Chaque √©quipe doit √™tre rattach√©e √† un d√©partement
                        </div>
                    </div>

                    <!-- √âtape 3 -->
                    <div class="bg-gray-50 border border-gray-300 rounded p-4">
                        <h4 class="font-semibold text-gray-800 mb-2">III.1.3) Postes</h4>
                        <p class="text-gray-700 mb-2">Chaque √©quipe peut comporter un ou plusieurs postes.</p>
                        <div class="bg-gray-100 p-3 rounded text-sm mb-3">
                            <strong>Important :</strong> Les postes sont cr√©√©s dans un menu √† part enti√®re (Administration ‚Üí Liste des Postes). C'est seulement au moment de la cr√©ation de l'√©quipe qu'il est possible de leur affecter un agent, un plan de roulement et une r√®gle de jour f√©ri√©.
                        </div>
                        <p class="text-gray-700 mb-2 text-sm">Pour chaque poste d'une √©quipe, vous pouvez d√©finir :</p>
                        <div class="bg-white p-3 rounded border text-sm space-y-2">
                            <p><strong>‚Ä¢ Affectation d'un agent :</strong> Agent affect√© sur une p√©riode pr√©cise</p>
                            <p><strong>‚Ä¢ Plan de roulement :</strong> Planning automatique appliqu√© au poste</p>
                            <p><strong>‚Ä¢ R√®gle jours f√©ri√©s :</strong> Inclusion/exclusion des jours f√©ri√©s</p>
                        </div>
                    </div>

                    <!-- √âtape 4 -->
                    <div class="bg-gray-50 border border-gray-300 rounded p-4">
                        <h4 class="font-semibold text-gray-800 mb-2">III.1.4) Types d'horaires</h4>
                        <p class="text-gray-700 mb-2">Les types d'horaires sont des cat√©gories de travail (ex : Jour travaill√©, Cong√© pay√©, Astreinte sur site...).</p>
                        <div class="bg-white p-3 rounded border text-sm">
                            <strong>Navigation :</strong> Administration ‚Üí Types d'horaires<br>
                            <strong>Priorit√© :</strong> Ils doivent √™tre cr√©√©s avant les rythmes quotidiens, car ces derniers en d√©pendent
                        </div>
                    </div>

                    <!-- √âtape 5 -->
                    <div class="bg-gray-50 border border-gray-300 rounded p-4">
                        <h4 class="font-semibold text-gray-800 mb-2">III.1.5) Rythmes quotidiens</h4>
                        <p class="text-gray-700 mb-2">Les rythmes quotidiens repr√©sentent la composition d'une journ√©e de travail (ex : 7h-19h) associ√© √† un type d'horaire.</p>
                        <div class="bg-white p-3 rounded border text-sm">
                            <strong>Navigation :</strong> Administration ‚Üí Rythmes Quotidien<br>
                            <strong>D√©pendance :</strong> N√©cessite les types d'horaire (√©tape 4)<br>
                            <strong>Usage :</strong> Ces rythmes sont les briques de base des plans de roulement
                        </div>
                    </div>

                    <!-- √âtape 6 -->
                    <div class="bg-gray-50 border border-gray-300 rounded p-4">
                        <h4 class="font-semibold text-gray-800 mb-2">III.1.6) Plans de roulement</h4>
                        <p class="text-gray-700 mb-2">Un plan de roulement est une s√©quence hebdomadaire (ou multi-hebdomadaire) de rythmes quotidiens.</p>
                        <div class="bg-white p-3 rounded border text-sm">
                            <strong>Navigation :</strong> Administration ‚Üí Roulements Hebdomadaires<br>
                            <strong>D√©pendance :</strong> N√©cessite les rythmes quotidiens (√©tape 5)<br>
                            <strong>Application :</strong> Il pourra ensuite √™tre appliqu√© √† un poste ou √† une √©quipe
                        </div>
                    </div>
                </div>
            </section>

            <!-- III.2) Gestion des modules -->
            <section id="gestion-modules">
                <h3 class="text-lg font-semibold text-gray-700 border-b border-gray-200 pb-2 mb-4">
                    III.2) Gestion des modules d'administration
                </h3>

                <div class="space-y-6">
                    <!-- Modules de base -->
                    <div>
                        <h4 class="font-semibold text-gray-800 mb-3">III.2.1) Modules de donn√©es de base</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                <h5 class="font-semibold text-blue-800 mb-2">üóÉÔ∏è D√©partements</h5>
                                <ul class="text-sm text-blue-700 space-y-1">
                                    <li>‚Ä¢ Base hi√©rarchique obligatoire</li>
                                    <li>‚Ä¢ Auto-incr√©mentation par 10 (10, 20, 30...)</li>
                                    <li>‚Ä¢ Recherche en temps r√©el par nom</li>
                                    <li>‚Ä¢ Ordre d'affichage intelligent</li>
                                </ul>
                            </div>
                            <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                                <h5 class="font-semibold text-purple-800 mb-2">üóÉÔ∏è Liste des Postes</h5>
                                <ul class="text-sm text-purple-700 space-y-1">
                                    <li>‚Ä¢ Fonctions de l'organisation</li>
                                    <li>‚Ä¢ Statuts actif/inactif avec badges</li>
                                    <li>‚Ä¢ Descriptions compl√®tes sans troncature</li>
                                    <li>‚Ä¢ Filtrage avanc√© par statut</li>
                                </ul>
                            </div>
                            <div class="bg-pink-50 border border-pink-200 rounded-lg p-4">
                                <h5 class="font-semibold text-pink-800 mb-2">üóÉÔ∏è Liste des Agents</h5>
                                <ul class="text-sm text-pink-700 space-y-1">
                                    <li>‚Ä¢ Personnel avec permissions</li>
                                    <li>‚Ä¢ Recherche par matricule, nom, pr√©nom</li>
                                    <li>‚Ä¢ Gestion des permissions int√©gr√©e</li>
                                    <li>‚Ä¢ Tri multi-colonnes avec conservation filtres</li>
                                </ul>
                            </div>
                            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                                <h5 class="font-semibold text-yellow-800 mb-2">üóÉÔ∏è Jours F√©ri√©s</h5>
                                <ul class="text-sm text-yellow-700 space-y-1">
                                    <li>‚Ä¢ Dates exceptionnelles</li>
                                    <li>‚Ä¢ Compteurs par ann√©e</li>
                                    <li>‚Ä¢ Fonction de duplication</li>
                                    <li>‚Ä¢ Validation anti-doublons</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Modules de planification -->
                    <div>
                        <h4 class="font-semibold text-gray-800 mb-3">III.2.2) Modules de planification</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                                <h5 class="font-semibold text-green-800 mb-2">üóÉÔ∏è Types d'Horaires</h5>
                                <ul class="text-sm text-green-700 space-y-1">
                                    <li>‚Ä¢ Cat√©gories de travail avec couleurs</li>
                                    <li>‚Ä¢ Abr√©viations optionnelles (MAT, APM, NUIT)</li>
                                    <li>‚Ä¢ Validation automatique des formats</li>
                                    <li>‚Ä¢ Protection contre suppression si li√©s</li>
                                </ul>
                            </div>
                            <div class="bg-teal-50 border border-teal-200 rounded-lg p-4">
                                <h5 class="font-semibold text-teal-800 mb-2">üóÉÔ∏è Rythmes Quotidiens</h5>
                                <ul class="text-sm text-teal-700 space-y-1">
                                    <li>‚Ä¢ Mod√®les d'horaires quotidiens</li>
                                    <li>‚Ä¢ Interface accordion avec expansion</li>
                                    <li>‚Ä¢ Gestion des p√©riodes int√©gr√©e</li>
                                    <li>‚Ä¢ Validation des √©quipes de nuit</li>
                                </ul>
                            </div>
                            <div class="bg-indigo-50 border border-indigo-200 rounded-lg p-4">
                                <h5 class="font-semibold text-indigo-800 mb-2">üóÉÔ∏è Roulements Hebdomadaires</h5>
                                <ul class="text-sm text-indigo-700 space-y-1">
                                    <li>‚Ä¢ Plannings r√©currents multi-semaines</li>
                                    <li>‚Ä¢ Tableau hebdomadaire interactif</li>
                                    <li>‚Ä¢ Assignation multiple de rythmes par jour</li>
                                    <li>‚Ä¢ Duplication instantan√©e de semaines</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Fonctionnalit√©s communes -->
                    <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                        <h4 class="font-semibold text-gray-800 mb-3">III.2.3) Fonctionnalit√©s communes √† tous les modules</h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                            <div>
                                <h5 class="font-semibold text-gray-700 mb-2">üîç Recherche et filtrage</h5>
                                <ul class="text-gray-600 space-y-1">
                                    <li>‚Ä¢ Recherche en temps r√©el (d√©lai 300ms)</li>
                                    <li>‚Ä¢ Tri multi-colonnes (ASC/DESC)</li>
                                    <li>‚Ä¢ Conservation des filtres lors navigation</li>
                                    <li>‚Ä¢ Filtres avanc√©s par statut</li>
                                </ul>
                            </div>
                            <div>
                                <h5 class="font-semibold text-gray-700 mb-2">üé® Interface utilisateur</h5>
                                <ul class="text-gray-600 space-y-1">
                                    <li>‚Ä¢ Modales HTMX sans rechargement</li>
                                    <li>‚Ä¢ Split buttons pour actions rapides</li>
                                    <li>‚Ä¢ Badges color√©s pour statuts visuels</li>
                                    <li>‚Ä¢ Design harmonis√© avec Tailwind CSS</li>
                                </ul>
                            </div>
                            <div>
                                <h5 class="font-semibold text-gray-700 mb-2">‚ö° Performance</h5>
                                <ul class="text-gray-600 space-y-1">
                                    <li>‚Ä¢ Chargement √† la demande</li>
                                    <li>‚Ä¢ Mise √† jour temps r√©el</li>
                                    <li>‚Ä¢ Suppression de la pagination</li>
                                    <li>‚Ä¢ API REST d√©di√©e</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- III.3) Cas particuliers -->
            <section id="cas-particuliers">
                <h3 class="text-lg font-semibold text-gray-700 border-b border-gray-200 pb-2 mb-4">
                    III.3) Comportements automatiques du syst√®me
                </h3>
                
                <div class="bg-indigo-50 border-l-4 border-indigo-400 p-4 mb-6">
                    <h3 class="font-semibold text-indigo-800 mb-2">Comportement du syst√®me</h3>
                    <p class="text-indigo-700 text-sm">
                        Le syst√®me adopte des comportements automatiques selon la configuration des postes. 
                        Voici les diff√©rents scenarios possibles :
                    </p>
                </div>

                <div class="space-y-4">
                    <!-- Scenario 1 -->
                    <div class="bg-white border border-gray-200 rounded-lg p-4">
                        <div class="flex items-start">
                            <span class="bg-orange-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3 mt-1">1</span>
                            <div class="flex-1">
                                <h4 class="font-semibold text-gray-800 mb-2">Poste avec plan de roulement mais sans agent</h4>
                                <p class="text-sm text-gray-600">
                                    ‚Üí <strong>G√©n√©ration automatique</strong> de planning avec "Poste Vacant" (PV) comme type d'horaire 
                                    en lieu et place du type d'horaire pr√©existant.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Scenario 2 -->
                    <div class="bg-white border border-gray-200 rounded-lg p-4">
                        <div class="flex items-start">
                            <span class="bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3 mt-1">2</span>
                            <div class="flex-1">
                                <h4 class="font-semibold text-gray-800 mb-2">Poste avec agent mais sans plan de roulement</h4>
                                <p class="text-sm text-gray-600">
                                    ‚Üí <strong>La ligne de planning de l'agent reste vide</strong>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Scenario 3 -->
                    <div class="bg-white border border-gray-200 rounded-lg p-4">
                        <div class="flex items-start">
                            <span class="bg-green-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3 mt-1">3</span>
                            <div class="flex-1">
                                <h4 class="font-semibold text-gray-800 mb-2">Poste avec agent et plan de roulement</h4>
                                <p class="text-sm text-gray-600">
                                    ‚Üí <strong>Planning g√©n√©r√© automatiquement</strong> avec les rythmes d√©finis
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Scenario 4 -->
                    <div class="bg-white border border-gray-200 rounded-lg p-4">
                        <div class="flex items-start">
                            <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3 mt-1">4</span>
                            <div class="flex-1">
                                <h4 class="font-semibold text-gray-800 mb-2">Poste exclu des jours f√©ri√©s</h4>
                                <p class="text-sm text-gray-600">
                                    ‚Üí <strong>Le roulement s'applique sans tenir compte des jours f√©ri√©s</strong>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Scenario 5 -->
                    <div class="bg-white border border-gray-200 rounded-lg p-4">
                        <div class="flex items-start">
                            <span class="bg-purple-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3 mt-1">5</span>
                            <div class="flex-1">
                                <h4 class="font-semibold text-gray-800 mb-2">Poste inclus dans les jours f√©ri√©s</h4>
                                <p class="text-sm text-gray-600 mb-2">
                                    ‚Üí <strong>Le planning est modifi√© ou annul√© selon les jours f√©ri√©s</strong>
                                </p>
                                <div class="bg-purple-50 p-2 rounded text-xs text-purple-700">
                                    <strong>Exemple :</strong> Si le lundi est f√©ri√© mais initialement associ√© √† un rythme quotidien 
                                    dans le plan de roulement, alors le rythme de ce jour est supprim√©.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Note importante -->
                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-6">
                    <h4 class="font-semibold text-yellow-800 mb-2">üí° Principe important de pr√©servation des donn√©es</h4>
                    <p class="text-sm text-yellow-700 mb-2">
                        Il faut bien comprendre que ce qui est g√©n√©r√© remplit automatiquement le planning mais reste "en dessous" 
                        de ce que les utilisateurs imputent au planning manuellement.
                    </p>
                    <div class="bg-yellow-100 p-3 rounded text-xs text-yellow-800">
                        <strong>Exemple concret :</strong> Si dans une √©quipe j'associe un poste et un agent mais sans plan de roulement, 
                        je peux alors imputer un rythme quotidien associ√© √† un type d'horaire sur un jour particulier √† un agent. 
                        Mais si j'associe dans un second temps √† ce poste un roulement, le roulement se g√©n√®re sur le planning 
                        mais <strong>sans √©craser les jours d√©j√† d√©finis en amont</strong>. Ceci pour ne pas perdre de donn√©es.
                    </div>
                </div>
            </section>
            </section>

            <!-- IV) Administration avanc√©e -->
            <section id="administration-avancee">
                <h2 class="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4">
                    IV) Administration avanc√©e
                </h2>

            <!-- IV.1) Import/Export des donn√©es -->
            <section id="import-export">
                <h3 class="text-lg font-semibold text-gray-700 border-b border-gray-200 pb-2 mb-4">
                    IV.1) Import/Export des donn√©es
                </h3>
                
                <div class="bg-gray-100 border-l-4 border-gray-500 p-4 mb-6">
                    <h4 class="font-semibold text-gray-800 mb-2">Acc√®s restreint - Superutilisateur uniquement</h4>
                    <p class="text-gray-700 text-sm">
                        Les fonctionnalit√©s d'import/export sont <strong>exclusivement r√©serv√©es aux superutilisateurs</strong>. 
                        Elles permettent de sauvegarder et restaurer l'int√©gralit√© des donn√©es de l'application via l'interface Django Admin.
                    </p>
                </div>

                <!-- Export des donn√©es -->
                <div class="mb-8">
                    <h4 class="font-semibold text-gray-800 mb-4">IV.1.1) Export des donn√©es</h4>
                    
                    <div class="space-y-4">
                        <!-- Export global -->
                        <div class="bg-gray-50 border border-gray-300 rounded p-4">
                            <h5 class="font-semibold text-gray-800 mb-2">Export global (recommand√©)</h5>
                            <p class="text-sm text-gray-700 mb-3">
                                Exporte <strong>toutes les donn√©es</strong> de l'application en un seul fichier ZIP.
                            </p>
                            <div class="bg-white p-3 rounded border text-sm text-gray-700">
                                <p><strong>Acc√®s :</strong> Django Admin ‚Üí Core ‚Üí Bouton "Exporter Toutes les Donn√©es"</p>
                                <p><strong>Fichier g√©n√©r√© :</strong> <code>YYYY-MM-DD_HHMMSS_export_global_planning.zip</code></p>
                                <p><strong>Contenu :</strong> 10 fichiers JSON avec tous les mod√®les de l'application</p>
                            </div>
                        </div>

                        <!-- Export individuel -->
                        <div class="bg-gray-50 border border-gray-300 rounded p-4">
                            <h5 class="font-semibold text-gray-800 mb-2">Export individuel par mod√®le</h5>
                            <p class="text-sm text-gray-700 mb-3">
                                Exporte un seul type de donn√©es √† la fois. Utile pour des sauvegardes partielles ou des transferts s√©lectifs.
                            </p>
                            <div class="bg-white p-3 rounded border text-sm text-gray-700">
                                <p><strong>Acc√®s :</strong> Django Admin ‚Üí Core ‚Üí [Mod√®le] ‚Üí Bouton "Exporter JSON"</p>
                                <p><strong>Fichier g√©n√©r√© :</strong> <code>YYYY-MM-DD_[modele].json</code></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Import des donn√©es -->
                <div class="mb-8">
                    <h4 class="font-semibold text-gray-800 mb-4">IV.1.2) Import des donn√©es</h4>
                    
                    <div class="bg-gray-100 border border-gray-400 rounded p-4 mb-6">
                        <h5 class="font-semibold text-gray-800 mb-2">ATTENTION - Remplacement complet</h5>
                        <p class="text-sm text-gray-700">
                            L'import <strong>supprime d√©finitivement</strong> toutes les donn√©es existantes du mod√®le et les remplace 
                            par le contenu du fichier JSON. Cette action est <strong>irr√©versible</strong>.
                        </p>
                    </div>

                    <!-- Ordre d'importation obligatoire -->
                    <div class="bg-gray-50 border border-gray-300 rounded p-4 mb-6">
                        <h5 class="font-semibold text-gray-800 mb-3">Ordre d'importation OBLIGATOIRE</h5>
                        <p class="text-sm text-gray-700 mb-4">
                            Les mod√®les ont des <strong>d√©pendances hi√©rarchiques</strong>. Il est imp√©ratif de respecter cet ordre 
                            pour √©viter les erreurs de cl√©s √©trang√®res :
                        </p>
                        
                        <div class="bg-white border border-gray-300 rounded p-3">
                            <ol class="list-decimal list-inside space-y-1 text-sm text-gray-800">
                                <li><strong>D√©partements</strong> ‚Üí <code>YYYY-MM-DD_departments.json</code></li>
                                <li><strong>Agents</strong> ‚Üí <code>YYYY-MM-DD_agents.json</code></li>
                                <li><strong>Fonctions (Postes)</strong> ‚Üí <code>YYYY-MM-DD_functions.json</code></li>
                                <li><strong>Types d'horaire</strong> ‚Üí <code>YYYY-MM-DD_schedule_types.json</code></li>
                                <li><strong>Rythmes quotidiens</strong> ‚Üí <code>YYYY-MM-DD_daily_rotation_plans.json</code></li>
                                <li><strong>P√©riodes de rotation</strong> ‚Üí <code>YYYY-MM-DD_rotation_periods.json</code></li>
                                <li><strong>Plannings de poste</strong> ‚Üí <code>YYYY-MM-DD_shift_schedules.json</code></li>
                                <li><strong>P√©riodes de planning de poste</strong> ‚Üí <code>YYYY-MM-DD_shift_schedule_periods.json</code></li>
                                <li><strong>Semaines de planning</strong> ‚Üí <code>YYYY-MM-DD_shift_schedule_weeks.json</code></li>
                                <li><strong>Plans quotidiens de planning</strong> ‚Üí <code>YYYY-MM-DD_shift_schedule_daily_plans.json</code></li>
                            </ol>
                        </div>
                        
                        <div class="mt-3 p-2 bg-gray-100 rounded text-xs text-gray-700">
                            <strong>Note :</strong> Si vous utilisez l'export global, tous les fichiers JSON sont d√©j√† nomm√©s 
                            avec le bon pr√©fixe de date et pr√™ts √† √™tre import√©s dans l'ordre indiqu√©.
                        </div>
                    </div>

                    <!-- Proc√©dure d'import -->
                    <div class="bg-gray-50 border border-gray-300 rounded p-4">
                        <h5 class="font-semibold text-gray-800 mb-3">Proc√©dure d'import</h5>
                        <div class="space-y-2 text-sm text-gray-700">
                            <p><strong>1.</strong> Acc√®s : Django Admin ‚Üí Core ‚Üí [Mod√®le] ‚Üí Bouton "Importer JSON"</p>
                            <p><strong>2.</strong> S√©lection : Choisir le fichier JSON correspondant au mod√®le</p>
                            <p><strong>3.</strong> Confirmation : Cocher la case de confirmation obligatoire</p>
                            <p><strong>4.</strong> Validation : Le syst√®me v√©rifie automatiquement la structure et les d√©pendances</p>
                            <p><strong>5.</strong> Import : Remplacement complet des donn√©es si validation r√©ussie</p>
                        </div>
                    </div>
                </div>

                <!-- Mod√®les support√©s -->
                <div class="mb-8">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">üóÉÔ∏è Mod√®les support√©s</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Mod√®les de base -->
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                            <h4 class="font-semibold text-gray-800 mb-3">üìä Donn√©es de base</h4>
                            <ul class="space-y-1 text-sm text-gray-600">
                                <li>‚Ä¢ D√©partements</li>
                                <li>‚Ä¢ Agents</li>
                                <li>‚Ä¢ Fonctions (Postes)</li>
                                <li>‚Ä¢ Types d'horaire</li>
                            </ul>
                        </div>

                        <!-- Mod√®les de planification -->
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                            <h4 class="font-semibold text-gray-800 mb-3">üìÖ Donn√©es de planification</h4>
                            <ul class="space-y-1 text-sm text-gray-600">
                                <li>‚Ä¢ Rythmes quotidiens</li>
                                <li>‚Ä¢ P√©riodes de rotation</li>
                                <li>‚Ä¢ Plannings de poste</li>
                                <li>‚Ä¢ P√©riodes de planning</li>
                                <li>‚Ä¢ Semaines de planning</li>
                                <li>‚Ä¢ Plans quotidiens</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Bonnes pratiques -->
                <div class="bg-gray-50 border border-gray-300 rounded p-4">
                    <h5 class="font-semibold text-gray-800 mb-3">Bonnes pratiques</h5>
                    <ul class="space-y-1 text-sm text-gray-700">
                        <li>‚Ä¢ <strong>Sauvegarde pr√©ventive :</strong> Toujours exporter avant d'importer</li>
                        <li>‚Ä¢ <strong>Environnement de test :</strong> Tester d'abord sur une copie de la base</li>
                        <li>‚Ä¢ <strong>V√©rification :</strong> Contr√¥ler les donn√©es apr√®s import</li>
                        <li>‚Ä¢ <strong>Documentation :</strong> Noter la date et la raison de chaque import/export</li>
                        <li>‚Ä¢ <strong>Acc√®s restreint :</strong> Seuls les superutilisateurs peuvent utiliser ces fonctions</li>
                    </ul>
                </div>
            </section>

            <!-- IV.2) Interface Django Admin -->
            <section id="interface-django">
                <h3 class="text-lg font-semibold text-gray-700 border-b border-gray-200 pb-2 mb-4">
                    IV.2) Interface Django Admin
                </h3>
                
                <div class="space-y-4">
                    <!-- Acc√®s -->
                    <div class="bg-gray-50 border border-gray-300 rounded p-4">
                        <h4 class="font-semibold text-gray-800 mb-2">IV.2.1) Acc√®s √† l'interface</h4>
                        <div class="text-gray-700 text-sm space-y-1">
                            <p><strong>URL :</strong> http://127.0.0.1:8000/admin/</p>
                            <p><strong>Acc√®s :</strong> Menu Administration ‚Üí Interface d'Administration Django (superutilisateurs uniquement)</p>
                            <p><strong>Identifiants par d√©faut :</strong></p>
                            <ul class="ml-4 space-y-1">
                                <li>‚Ä¢ Utilisateur : azerty</li>
                                <li>‚Ä¢ Email : azerty@azerty.com</li>
                                <li>‚Ä¢ Mot de passe : azerty</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Fonctionnalit√©s -->
                    <div class="bg-gray-50 border border-gray-300 rounded p-4">
                        <h4 class="font-semibold text-gray-800 mb-2">IV.2.2) Fonctionnalit√©s sp√©cifiques</h4>
                        <div class="text-gray-700 text-sm space-y-1">
                            <p><strong>Export global :</strong> Bouton "Exporter Toutes les Donn√©es" sur la page Core</p>
                            <p><strong>Export individuel :</strong> Boutons "Exporter JSON" sur chaque mod√®le</p>
                            <p><strong>Import s√©curis√© :</strong> Boutons "Importer JSON" avec confirmations multiples</p>
                            <p><strong>Gestion avanc√©e :</strong> Configuration syst√®me et maintenance technique</p>
                        </div>
                    </div>

                    <!-- Navigation -->
                    <div class="bg-gray-50 border border-gray-300 rounded p-4">
                        <h4 class="font-semibold text-gray-800 mb-2">IV.2.3) Navigation dans Django Admin</h4>
                        <div class="text-gray-700 text-sm space-y-1">
                            <p><strong>Page Core :</strong> Point d'entr√©e principal avec export global</p>
                            <p><strong>Mod√®les support√©s :</strong> 10 mod√®les avec fonctions import/export individuelles</p>
                            <p><strong>S√©curit√© :</strong> Pr√©servation automatique des comptes superutilisateurs lors des imports</p>
                            <p><strong>Interface moderne :</strong> Templates personnalis√©s avec boutons d'action int√©gr√©s</p>
                        </div>
                    </div>
                </div>
            </section>
            </section>
        </div>
    </div>
</div>
{% endblock %}